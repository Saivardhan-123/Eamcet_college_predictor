{% extends "base.html" %}

{% block title %}Manual Prediction - EAMCET College Predictor{% endblock %}

{% block page_title %}Manual College Prediction{% endblock %}
{% block page_subtitle %}Enter your EAMCET rank and category for instant college predictions{% endblock %}

{% block content %}
<!-- Prediction Form -->
<div class="content-card">
    <div class="card-header">
        <h2 class="card-title">ðŸŽ¯ Enter Your Details</h2>
        <p class="card-description">Provide your EAMCET rank and category for accurate college predictions</p>
    </div>
    
    <form method="post" action="{{ url_for('predict') }}" class="prediction-form">
        <div class="form-group">
            <label class="form-label" for="rank">EAMCET Rank</label>
            <input type="number" id="rank" name="rank" class="form-input" placeholder="Enter your rank" required>
            <div class="form-help">Enter your actual EAMCET rank</div>
        </div>
        
        <div class="form-group">
            <label class="form-label" for="caste">Category</label>
            <select id="caste" name="caste" class="form-select" required>
                <option value="">Select your category</option>
                <option value="oc">OC (Open Category)</option>
                <option value="bc_a">BC-A</option>
                <option value="bc_b">BC-B</option>
                <option value="bc_c">BC-C</option>
                <option value="bc_d">BC-D</option>
                <option value="bc_e">BC-E</option>
                <option value="sc">SC (Scheduled Caste)</option>
                <option value="st">ST (Scheduled Tribe)</option>
                <option value="ews_gen_ou">EWS-General</option>
                <option value="ews_girls_ou">EWS-Girls</option>
            </select>
            <div class="form-help">Select your reservation category</div>
        </div>
        
        <button type="submit" class="btn btn-primary btn-lg">
            <span>ðŸ”® Predict Colleges</span>
        </button>
    </form>
    
    {% if error_message %}
        <div class="alert alert-error">{{ error_message }}</div>
    {% elif not has_results and request.method == "POST" %}
        <div class="alert alert-info">
            No colleges found for your rank and category combination. Try adjusting your rank or check back later for updated data.
        </div>
    {% endif %}
</div>

{% if has_results %}
<!-- Results Section -->
<div class="content-card">
    <div class="card-header">
        <h2 class="card-title">ðŸŽ“ Predicted Colleges</h2>
        <p class="card-description">
            Based on TGEAPCET {% if data_year %}{{ data_year }}{% endif %} official data - 
            Showing top {{ results|length }} most relevant colleges
        </p>
    </div>
    
    <div class="table-container">
        <table class="data-table">
            <thead>
                <tr>
                    <th>Institute Name</th>
                    <th>Branch Name</th>
                    <th>Tuition Fee (â‚¹)</th>
                    <th>Boys' Closing Rank</th>
                    <th>Girls' Closing Rank</th>
                </tr>
            </thead>
            <tbody>
                {% for result in results %}
                    <tr>
                        <td>{{ result[0] }}</td>
                        <td>{{ result[1] }}</td>
                        <td>{{ result[2] if result[2] else 'N/A' }}</td>
                        <td>{{ result[3] if result[3] != 0 else '-' }}</td>
                        <td>{{ result[4] if result[4] != 0 else '-' }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    
    <div style="margin-top: 2rem; text-align: center;">
        <a href="{{ url_for('predict_rank') }}" class="btn btn-accent">
            ðŸ¤– Try AI Prediction Instead
        </a>
    </div>
</div>
{% endif %}
{% endblock %}
